{
  "metadata": {
    "timestamp": "2025-11-12T15:41:09.079948+00:00",
    "version": "0.1.0b1",
    "generated_by": "AKS Network Diagnostics Script (Python)"
  },
  "cluster": {
    "name": "aks-mixed",
    "resource_group": "aks-mixed-rg",
    "subscription": "18fcfcaf-51b0-42c1-91ba-b14fe22f59dd",
    "provisioning_state": "Succeeded",
    "location": "canadacentral",
    "node_resource_group": "MC_aks-mixed-rg_aks-mixed_canadacentral",
    "network_profile": {
      "network_plugin": "azure",
      "network_plugin_mode": "overlay",
      "network_policy": "none",
      "network_dataplane": "azure",
      "pod_cidr": "10.244.0.0/16",
      "service_cidr": "10.0.0.0/16",
      "dns_service_ip": "10.0.0.10",
      "outbound_type": "loadBalancer",
      "load_balancer_sku": "standard",
      "load_balancer_profile": {
        "managed_outbound_i_ps": {
          "count": 1
        },
        "effective_outbound_i_ps": [
          {
            "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/publicIPAddresses/b89190a5-36f8-43e8-bb38-0c5dd1ba0bdb"
          }
        ],
        "backend_pool_type": "nodeIPConfiguration"
      },
      "pod_cidrs": [
        "10.244.0.0/16"
      ],
      "service_cidrs": [
        "10.0.0.0/16"
      ],
      "ip_families": [
        "IPv4"
      ]
    },
    "api_server_access": {}
  },
  "network_configuration": {
    "vnets": [
      {
        "name": "aks-vnet-11278048",
        "resource_group": "MC_aks-mixed-rg_aks-mixed_canadacentral",
        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/mc_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/virtualNetworks/aks-vnet-11278048",
        "address_space": [
          "10.224.0.0/12"
        ],
        "subnets": [
          {
            "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/mc_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/virtualNetworks/aks-vnet-11278048/subnets/aks-subnet",
            "name": "aks-subnet",
            "address_prefix": "10.224.0.0/16",
            "address_prefixes": null
          },
          {
            "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/mc_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/virtualNetworks/aks-vnet-11278048/subnets/aks-appgateway",
            "name": "aks-appgateway",
            "address_prefix": "10.238.0.0/24",
            "address_prefixes": null
          },
          {
            "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/mc_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/virtualNetworks/aks-vnet-11278048/subnets/aks-virtualkubelet",
            "name": "aks-virtualkubelet",
            "address_prefix": "10.239.0.0/16",
            "address_prefixes": null
          }
        ],
        "peerings": []
      }
    ],
    "outbound": {
      "type": "loadBalancer",
      "configured_public_ips": [
        "4.204.144.94"
      ],
      "effective_outbound": {
        "mechanism": "loadBalancer",
        "overridden_by_udr": false,
        "effective_mechanism": "loadBalancer",
        "virtual_appliance_ips": [],
        "load_balancer_ips": [
          "4.204.144.94"
        ],
        "warnings": [],
        "description": "Traffic uses Load Balancer with public IP(s): 4.204.144.94"
      },
      "udr_analysis": {
        "route_tables": [],
        "critical_routes": [],
        "virtual_appliance_routes": [],
        "internet_routes": []
      }
    },
    "private_dns": {
      "type": "none",
      "is_private_cluster": false,
      "vnet_integration": false,
      "private_dns_zone": null,
      "analysis": "No API server access profile found - not a private cluster"
    },
    "api_server_access": {
      "private_cluster": false,
      "vnet_integration": false,
      "access_mode": "public",
      "authorized_ip_ranges": [],
      "disable_run_command": false,
      "analysis": {
        "ip_range_restriction": "none"
      },
      "security_findings": [],
      "access_restrictions": {}
    },
    "vmss_configuration": [
      {
        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Compute/virtualMachineScaleSets/aks-vmsspool-28441388-vmss",
        "name": "aks-vmsspool-28441388-vmss",
        "type": "Microsoft.Compute/virtualMachineScaleSets",
        "location": "canadacentral",
        "tags": {
          "aks-managed-azure-cni-overlay": "true",
          "aks-managed-bootstrap-profile-acr-name": "",
          "aks-managed-consolidated-additional-properties": "015bd9e3-bf22-11f0-99bd-ee986e41d639",
          "aks-managed-createOperationID": "e46f19cd-dabb-4a8f-b4fd-14969dccf65a",
          "aks-managed-creationSource": "vmssclient-aks-vmsspool-28441388-vmss",
          "aks-managed-enable-imds-restriction": "false",
          "aks-managed-kubeletIdentityClientID": "d4149ecb-89cf-41b5-8b61-3fbeb488c699",
          "aks-managed-networkisolated-outbound-type": "",
          "aks-managed-orchestrator": "Kubernetes:1.32.9",
          "aks-managed-poolName": "vmsspool",
          "aks-managed-resourceNameSuffix": "11278048",
          "aks-managed-ssh-access": "LocalUser",
          "compute.aks.billing": "true"
        },
        "sku": {
          "name": "Standard_D4s_v3",
          "tier": "Standard",
          "capacity": 0
        },
        "identity": {
          "type": "UserAssigned",
          "user_assigned_identities": {
            "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aks-mixed-agentpool": {
              "principal_id": "193ce7fa-df75-4916-a5dd-4118b6e700af",
              "client_id": "d4149ecb-89cf-41b5-8b61-3fbeb488c699"
            }
          }
        },
        "etag": "\"7\"",
        "upgrade_policy": {
          "mode": "Manual"
        },
        "virtual_machine_profile": {
          "os_profile": {
            "computer_name_prefix": "aks-vmsspool-28441388-vmss",
            "admin_username": "azureuser",
            "linux_configuration": {
              "disable_password_authentication": true,
              "ssh": {
                "public_keys": [
                  {
                    "path": "/home/azureuser/.ssh/authorized_keys",
                    "key_data": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDeoVlk6hqi4bnryuRlJnDe/WRwNzobjxNsxUpQlMAZ5cRA3Nn/D8mXPrx2Mj1Ytm/6AviYMQSToBaSTv1QCucesIdx9N9Wqd2UpD63AXcjiNBP89FbqVzyTo4I/kYCt5GBVbmGEunWEP8mBqatd5wq+e3ExlqrmiMTcP86W+frDmTHT5Q8Hxs/C+VGDHeUxsTNfWRc5Rrp2uIda5KsW2fvJFbXmumFcT3EdqheWLWvb9JDKgptgS6x3xH1ltoT1tjG4VSv6cc864PFuhB065P8K2ai0itgZ9OSzNrT1jkCaPzA1TYHR7OxiJ872xtv7xTANrdkq/VHOyXx9O0F1nSr"
                  }
                ]
              },
              "provision_vm_agent": true
            },
            "secrets": [],
            "allow_extension_operations": true,
            "require_guest_provision_signal": true
          },
          "storage_profile": {
            "image_reference": {
              "id": "/subscriptions/109a5e88-712a-48ae-9078-9ca8b3c81345/resourceGroups/AKS-Ubuntu/providers/Microsoft.Compute/galleries/AKSUbuntu/images/2204gen2containerd/versions/202510.29.0"
            },
            "os_disk": {
              "caching": "ReadOnly",
              "create_option": "FromImage",
              "disk_size_gb": 128,
              "os_type": "Linux",
              "managed_disk": {
                "storage_account_type": "Premium_LRS"
              }
            },
            "disk_controller_type": "SCSI"
          },
          "network_profile": {
            "network_interface_configurations": [
              {
                "name": "aks-vmsspool-28441388-vmss",
                "primary": true,
                "enable_accelerated_networking": true,
                "disable_tcp_state_tracking": false,
                "dns_settings": {
                  "dns_servers": []
                },
                "ip_configurations": [
                  {
                    "name": "ipconfig1",
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/virtualNetworks/aks-vnet-11278048/subnets/aks-subnet"
                    },
                    "primary": true,
                    "private_ip_address_version": "IPv4",
                    "load_balancer_backend_address_pools": [
                      {
                        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/aksOutboundBackendPool"
                      },
                      {
                        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/kubernetes"
                      }
                    ]
                  }
                ],
                "enable_ip_forwarding": true
              }
            ]
          },
          "extension_profile": {
            "extensions": [
              {
                "name": "vmssCSE",
                "publisher": "Microsoft.Azure.Extensions",
                "type_properties_type": "CustomScript",
                "type_handler_version": "2.0",
                "auto_upgrade_minor_version": true,
                "settings": {}
              },
              {
                "name": "aks-vmsspool-28441388-vmss-AKSLinuxBilling",
                "publisher": "Microsoft.AKS",
                "type_properties_type": "Compute.AKS.Linux.Billing",
                "type_handler_version": "1.0",
                "auto_upgrade_minor_version": true,
                "settings": {}
              },
              {
                "name": "AKSLinuxExtension",
                "publisher": "Microsoft.AKS",
                "type_properties_type": "Compute.AKS.Linux.AKSNode",
                "type_handler_version": "1.364",
                "auto_upgrade_minor_version": false,
                "settings": {
                  "disable-uu": "true",
                  "enable-uu": "false",
                  "node-exporter-tls": "false"
                },
                "suppress_failures": false
              }
            ],
            "extensions_time_budget": "PT16M"
          },
          "time_created": "2025-11-11T17:46:08.226209Z"
        },
        "provisioning_state": "Succeeded",
        "overprovision": false,
        "do_not_run_extensions_on_overprovisioned_v_ms": false,
        "unique_id": "97f9f899-82f9-486a-b43e-a63bcaf78161",
        "single_placement_group": false,
        "platform_fault_domain_count": 1,
        "orchestration_mode": "Uniform",
        "time_created": "2025-11-11T17:15:26.531484Z"
      }
    ],
    "vm_configuration": [],
    "nsg_configuration": {
      "subnet_nsgs": [
        {
          "subnet_id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/virtualNetworks/aks-vnet-11278048/subnets/aks-subnet",
          "subnet_name": "aks-subnet",
          "subnet_type": "node",
          "nsg_id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-11278048-nsg",
          "nsg_name": "aks-agentpool-11278048-nsg",
          "rules": [],
          "default_rules": [
            {
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-11278048-nsg/defaultSecurityRules/AllowVnetInBound",
              "name": "AllowVnetInBound",
              "etag": "W/\"49f08a7e-877f-4b27-a692-4de76ee0d93a\"",
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
              "description": "Allow inbound traffic from all VMs in VNET",
              "protocol": "*",
              "source_port_range": "*",
              "destination_port_range": "*",
              "source_address_prefix": "VirtualNetwork",
              "source_address_prefixes": [],
              "destination_address_prefix": "VirtualNetwork",
              "destination_address_prefixes": [],
              "source_port_ranges": [],
              "destination_port_ranges": [],
              "access": "Allow",
              "priority": 65000,
              "direction": "Inbound",
              "provisioning_state": "Succeeded"
            },
            {
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-11278048-nsg/defaultSecurityRules/AllowAzureLoadBalancerInBound",
              "name": "AllowAzureLoadBalancerInBound",
              "etag": "W/\"49f08a7e-877f-4b27-a692-4de76ee0d93a\"",
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
              "description": "Allow inbound traffic from azure load balancer",
              "protocol": "*",
              "source_port_range": "*",
              "destination_port_range": "*",
              "source_address_prefix": "AzureLoadBalancer",
              "source_address_prefixes": [],
              "destination_address_prefix": "*",
              "destination_address_prefixes": [],
              "source_port_ranges": [],
              "destination_port_ranges": [],
              "access": "Allow",
              "priority": 65001,
              "direction": "Inbound",
              "provisioning_state": "Succeeded"
            },
            {
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-11278048-nsg/defaultSecurityRules/DenyAllInBound",
              "name": "DenyAllInBound",
              "etag": "W/\"49f08a7e-877f-4b27-a692-4de76ee0d93a\"",
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
              "description": "Deny all inbound traffic",
              "protocol": "*",
              "source_port_range": "*",
              "destination_port_range": "*",
              "source_address_prefix": "*",
              "source_address_prefixes": [],
              "destination_address_prefix": "*",
              "destination_address_prefixes": [],
              "source_port_ranges": [],
              "destination_port_ranges": [],
              "access": "Deny",
              "priority": 65500,
              "direction": "Inbound",
              "provisioning_state": "Succeeded"
            },
            {
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-11278048-nsg/defaultSecurityRules/AllowVnetOutBound",
              "name": "AllowVnetOutBound",
              "etag": "W/\"49f08a7e-877f-4b27-a692-4de76ee0d93a\"",
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
              "description": "Allow outbound traffic from all VMs to all VMs in VNET",
              "protocol": "*",
              "source_port_range": "*",
              "destination_port_range": "*",
              "source_address_prefix": "VirtualNetwork",
              "source_address_prefixes": [],
              "destination_address_prefix": "VirtualNetwork",
              "destination_address_prefixes": [],
              "source_port_ranges": [],
              "destination_port_ranges": [],
              "access": "Allow",
              "priority": 65000,
              "direction": "Outbound",
              "provisioning_state": "Succeeded"
            },
            {
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-11278048-nsg/defaultSecurityRules/AllowInternetOutBound",
              "name": "AllowInternetOutBound",
              "etag": "W/\"49f08a7e-877f-4b27-a692-4de76ee0d93a\"",
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
              "description": "Allow outbound traffic from all VMs to Internet",
              "protocol": "*",
              "source_port_range": "*",
              "destination_port_range": "*",
              "source_address_prefix": "*",
              "source_address_prefixes": [],
              "destination_address_prefix": "Internet",
              "destination_address_prefixes": [],
              "source_port_ranges": [],
              "destination_port_ranges": [],
              "access": "Allow",
              "priority": 65001,
              "direction": "Outbound",
              "provisioning_state": "Succeeded"
            },
            {
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-mixed-rg_aks-mixed_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-11278048-nsg/defaultSecurityRules/DenyAllOutBound",
              "name": "DenyAllOutBound",
              "etag": "W/\"49f08a7e-877f-4b27-a692-4de76ee0d93a\"",
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules",
              "description": "Deny all outbound traffic",
              "protocol": "*",
              "source_port_range": "*",
              "destination_port_range": "*",
              "source_address_prefix": "*",
              "source_address_prefixes": [],
              "destination_address_prefix": "*",
              "destination_address_prefixes": [],
              "source_port_ranges": [],
              "destination_port_ranges": [],
              "access": "Deny",
              "priority": 65500,
              "direction": "Outbound",
              "provisioning_state": "Succeeded"
            }
          ]
        }
      ],
      "nic_nsgs": [],
      "required_rules": {
        "outbound": [
          {
            "name": "AKS_Registry_Access",
            "protocol": "TCP",
            "destination": "MicrosoftContainerRegistry",
            "ports": [
              "443"
            ],
            "description": "Access to Microsoft Container Registry"
          },
          {
            "name": "AKS_Azure_Management",
            "protocol": "TCP",
            "destination": "AzureCloud",
            "ports": [
              "443"
            ],
            "description": "Azure management endpoints"
          },
          {
            "name": "AKS_DNS",
            "protocol": "UDP",
            "destination": "*",
            "ports": [
              "53"
            ],
            "description": "DNS resolution"
          },
          {
            "name": "AKS_NTP",
            "protocol": "UDP",
            "destination": "*",
            "ports": [
              "123"
            ],
            "description": "Network Time Protocol"
          },
          {
            "name": "AKS_API_Server_Access",
            "protocol": "TCP",
            "destination": "*",
            "ports": [
              "443"
            ],
            "description": "Access to AKS API server"
          }
        ],
        "inbound": [
          {
            "name": "AKS_Inter_Node_Communication",
            "protocol": "*",
            "source": "VirtualNetwork",
            "ports": [
              "*"
            ],
            "description": "Communication between cluster nodes"
          },
          {
            "name": "AKS_Load_Balancer",
            "protocol": "*",
            "source": "AzureLoadBalancer",
            "ports": [
              "*"
            ],
            "description": "Azure Load Balancer health probes"
          }
        ]
      },
      "blocking_rules": [],
      "inter_node_communication": {
        "status": "ok",
        "issues": []
      }
    },
    "routing_analysis": {
      "outbound_type": "loadBalancer",
      "udr_analysis": {
        "route_tables": [],
        "critical_routes": [],
        "virtual_appliance_routes": [],
        "internet_routes": []
      }
    }
  },
  "results": {
    "api_connectivity_probe": {
      "skipped": true,
      "reason": "Not requested"
    },
    "failure_analysis": {
      "enabled": false
    },
    "findings": [
      {
        "severity": "warning",
        "code": "CLUSTER_STOPPED",
        "message": "Cluster is in stopped state",
        "recommendation": "Start the cluster using 'az aks start' before running connectivity tests or accessing cluster resources"
      }
    ]
  }
}